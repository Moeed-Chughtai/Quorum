# Monolith vs Specialized Agents: Cost Savings Proof

Real-world benchmark comparing two ways to produce a marketing post (text + image) from 30 Google Reviews.

## Results (run: 2026-02-21)

| Pipeline | Cost | Models |
|----------|------|--------|
| **A — Monolith** | $0.149 | Gemini 3.1 Pro + Gemini 3 Pro Image |
| **B — Specialized Agents** | $0.024 | Flash Lite (scoring) + Flash (copy) + Riverflow V2 Fast (image) |

**Savings: 84% (6.3x cheaper)**

Both pipelines produce the same deliverable: 1 X (Twitter) post + 2 variants + hashtags + alt-text + 1 generated image.

## How it works

- **Pipeline A**: a single frontier model handles everything (review selection, copywriting, image prompt) then image generation.
- **Pipeline B**: each subtask is routed to the cheapest model capable of doing it. Repetitive work (scoring 30 reviews) runs on Flash Lite at $0.10/M tokens instead of Pro at $2.00/M.

## Reproduce

```bash
pip install requests python-dotenv
# Create a .env file with: key = <your OpenRouter API key>
python test_pipeline_comparison.py
```

## Evidence

- `results/report_20260221_172700.txt` — detailed report (cost per step, tokens, latency)
- `results/log_20260221_172700.json` — raw log of every API call
- `results/image_pipeline_a_20260221_172700.jpg` — image generated by the monolith
- `results/image_pipeline_b_20260221_172700.png` — image generated by the agents
- `prompts.json` — exact prompts sent to each model
- `gemini_pipeline_comparison.md` — theoretical cost analysis before the test
